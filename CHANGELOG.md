# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## Unreleased
### Added
- Channel length system test
- Documentation for usage in README
- System tests for MPA valve terminal
- Documentation will now be generated on user device
- ap_module_builder that configures a generic_ap_module by its apdd
- Added unit test for apdd builder

### Changed
- Minor code improvements in ap_module
- Improved sphinx documentation file
- Improved docu by suppressing some information that is not needed
- This release will drastically change the usability of all AP components. Modules are now autogenerated in the runtime. The documentation will only be available on the user device. There is a very useful CpxAp.print_system_information() function that will give you all the details about your system.
- Exchanged individual configure_... functions to generic read/write_module_parameter()
- Exchanged parameter mapping with read out information from ap system
- CPX-AP-*-EP: read_parameters() renamed to read_system_parameters()

### Fixed
- Numbering fixed and additional information added in README
- TypeError message in write_channel doesn't raise AttributeError anymore
- IndexError output on digital functions set/clear/toggle_channel now show correct string
- IO-link modules in cpx-ap now have correct amount of channels
- read_channel doesn't raise false IndexError on digital input modules
- Digital functions set/clear/toggle now return correct error string to IndexError
- ModuleBuilder issue with apdds containing no enums now behaves correctly

## v0.3.0 - 02.04.24
### Added 
- Added VABA (electric interface for VTSA valve terminal)
- CLI command `parameter` (options `--list` and `--meta`) showing parameter meta data
- channel_range_check in helpers, now raises IndexError instead of ValueError
- VMPAL Valve Terminal for CPX-AP
- VAEM Valve Terminal for CPX-AP
- Enums for configure functions
- Systemtests for VABX
- Examples for cyclic access with threading
- CpxBase: read_device_info
- CpxApEp: read_diagnostic_status reads Diagnostics for each module
- Unittests for CpxBase
- More examples

### Changed
- Determine parameter ids based on .csv.
- configure functions don't accept strings anymore. Instead use enums from cpx_ap/e_enums
- Moved read_diagnostics_status from CpxApEp to CpxAp
- Renamed ApParameter to ParameterMapItem,
- Renamed ApParameters to ModuleParameters
- ap4iol: code optimization
- CpxE: functions renamed to read_status, read_fault_detection
- CpxBase: now initializes with self.base=None instead of no self.base at all
- CpxAp: Parameter read/write now utilizes multi-register access
- CpxAp4Iol: read_channel now takes "full_size" parameter. Default is now to return the length from the device information (returns only relevant bytes)
- CpxApEP: deleted write_parameters(), added configure_monitoring_load_supply() instead
- Pybodmus Error now raises "ConnectionAbortedError" instead of "ValueError"
- IO-Link modules now read and write bytes objects
- Deleted obsolete cpx-e "read_module_count" function

### Fixed
- 4DI4DO and 12DI4DO modules toggle channel now working as expected
- AP Parameter length register is now interpreted correctly as "in bytes"
- Removed unnecessary validation check in write_parameter_raw
- Many logger.info strings in modules
- Docstring in e4aoui configure_channel_range
- ip-address octetts now in correct order
- Project URLs in pyproject.toml

## v0.2.0 - 26.01.24
### Added
- Added content to README.md
- Added module functions CPX-E/AP
- Handling of naming for more modules of one type (CPX-E and -AP)
- Added warning if cpx-e-ep module is added multiple times
- Added vabx module for vtux access
- ISDU Access for CPX-AP-4IOL
- Added CPX-AP-A modules
- Implemented CPX-E-1CI module
- Unittests for cpxe and cpxap modules
- CpxE and CpxAP: Added `__repr__` function
- CpxE: Added property setter / getter for more modules.
- CpxE: Added access-by-name for modules of CpxE.
- CpxE: Added construction from typecode.
- CpxE: Added property setter for modules.
- CpxE8Do: Added access-by-index-operator to channels
- CpxE: Added CLI for writing and reading values.

### Changed
- Removed timeout and port from CPX-base, implemented timeout for CPX-AP
- changed return value of read function number to int
- Added context manager functionality to cpx base class. Adapted examples to use this context manager.
- Updated modules list so each module can be adressed via the base class

### Fixed
- General Bugfixes

## v0.1.1 - 20.10.23
### Added
- Added deployment to artifactory.

### Fixed
- Fixed CI stages for unit test and linting.

## v0.1.0 - 17.10.23
- Initial release
